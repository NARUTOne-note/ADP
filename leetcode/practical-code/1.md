# å²›å±¿å‘¨é•¿

> ç®€å•â­

**âš¡é¢˜ç›®**ï¼š

â“ ç»™å®šä¸€ä¸ªåŒ…å« 0 å’Œ 1 çš„äºŒç»´ç½‘æ ¼åœ°å›¾ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºé™†åœ°Â 0 è¡¨ç¤ºæ°´åŸŸã€‚

ç½‘æ ¼ä¸­çš„æ ¼å­æ°´å¹³å’Œå‚ç›´æ–¹å‘ç›¸è¿ï¼ˆå¯¹è§’çº¿æ–¹å‘ä¸ç›¸è¿ï¼‰ã€‚æ•´ä¸ªç½‘æ ¼è¢«æ°´å®Œå…¨åŒ…å›´ï¼Œä½†å…¶ä¸­æ°å¥½æœ‰ä¸€ä¸ªå²›å±¿ï¼ˆæˆ–è€…è¯´ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç¤ºé™†åœ°çš„æ ¼å­ç›¸è¿ç»„æˆçš„å²›å±¿ï¼‰ã€‚

å²›å±¿ä¸­æ²¡æœ‰â€œæ¹–â€ï¼ˆâ€œæ¹–â€ æŒ‡æ°´åŸŸåœ¨å²›å±¿å†…éƒ¨ä¸”ä¸å’Œå²›å±¿å‘¨å›´çš„æ°´ç›¸è¿ï¼‰ã€‚æ ¼å­æ˜¯è¾¹é•¿ä¸º 1 çš„æ­£æ–¹å½¢ã€‚ç½‘æ ¼ä¸ºé•¿æ–¹å½¢ï¼Œä¸”å®½åº¦å’Œé«˜åº¦å‡ä¸è¶…è¿‡ 100 ã€‚è®¡ç®—è¿™ä¸ªå²›å±¿çš„å‘¨é•¿

è¾“å…¥:
[[0,1,0,0],
 [1,1,1,0],
 [0,1,0,0],
 [1,1,0,0]]

![island](./island.png)

è¾“å‡º: 16

## æ€è€ƒ âŒš

- éå†æ¯ä¸ªæ ¼å­ é»˜è®¤ 4
- åˆ¤æ–­å½“å‰æ ¼å­å››å‘¨æ˜¯å¦å­˜åœ¨é™†åœ°ï¼Œ å­˜åœ¨nä¸ª -n
- æ¯æ¬¡éå†å‰©ä½™ä¸ç›¸é‚»æ ¼å­è¾¹æ•°ç´¯åŠ å³ä¸ºå‘¨é•¿

## å°è¯• âŒ›

> å¸¸è§„éå†

æ—¶é—´å¤æ‚åº¦ï¼š O(mn)
ç©ºé—´å¤æ‚åº¦ï¼šO(1)

```js
/**
 * @param {number[][]} grid
 * @return {number}
 */
var islandPerimeter = function(grid) {
  if (!grid || !grid.length) return 0;

  const len = grid.length;
  let total = 0;

  for(let i = 0; i < len; i++) {
    const row = grid[i];
    for (let j = 0; j < row.length; j++) {
      const col = row[j];
      let colv = 0;
      // åˆ¤æ–­å‘¨è¾¹
      if (col) {
        colv = 4;
        // ä¸Š
        if ((i - 1) >= 0 && grid[i-1][j]) {
          colv -= 1
        }

        // å³
        if ((j + 1) < row.length && grid[i][j+1]) {
          colv -= 1
        }

        // ä¸‹
        if ((i + 1) < len && grid[i+1][j]) {
          colv -= 1
        }

        // å·¦
        if ((j - 1) >= 0 && grid[i][j-1]) {
          colv -= 1
        }
      }
      total += colv;
    }
  }
  return total;
};
```

## ä¼˜è§£ ğŸš€

> DFS éå†

- åˆ©ç”¨DFSè¿›è¡Œå½“å‰èŠ‚ç‚¹çš„æ·±åº¦éå†
- é˜²æ­¢èŠ‚ç‚¹å¤šæ¬¡éå†
- èµ·ç‚¹ä»é™†åœ°å¼€å§‹
- å¤„ç†è¾¹ç•Œè¿” 1

```js
/**
 * @param {number[][]} grid
 * @return {number}
 */
var islandPerimeter = function(grid) {
  if (!grid || !grid.length) return 0;

  const dx = [0, 1, 0, -1];
  const dy = [1, 0, -1, 0];
  const n = grid.length, m = grid[0].length;

  // DFS éå† èŠ‚ç‚¹ [x, y]
  function dfs(x, y) {
    // é‡è¾¹ç•Œã€æ°´åŸŸ åˆ™è¿”å› 1
    if (x < 0 || x >= n || y < 0 || y >= m || grid[x][y] === 0) {
      return 1;
    }

    // é‡åˆ°éå†è¿‡çš„é™†åœ°ï¼Œè¿”å›ï¼Œé¢„é˜²ä¸åœéå†
    if (grid[x][y] === 2) {
      return 0;
    }

    grid[x][y] = 2;
    let res = 0;

    // éå†ç›¸é‚»å››å‘¨ï¼Œè¿›è¡Œç´¯åŠ è®¡ç®—å½“å‰ä½ç½®çš„å‘¨é•¿
    for (let i = 0; i < 4; ++i) {
        const tx = x + dx[i];
        const ty = y + dy[i];
        res += dfs(tx, ty);
    }
    return res;
  }

  let ans = 0;
  for (let i = 0; i < n; ++i) {
      for (let j = 0; j < m; ++j) {
          // èµ·ç‚¹ä»é™†åœ°å¼€å§‹
          if (grid[i][j] === 1) {
              ans += dfs(i, j);
          }
      }
  }
  return ans;
}
```
