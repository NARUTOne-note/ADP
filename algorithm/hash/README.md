# Hash 哈希

> 散列表，散列函数，它们跟哈希表，哈希函数是一个概念。

[消息摘要算法 参考](https://juejin.cn/post/6922212820280934413?utm_source=gold_browser_extension)

就是**将任意数量的数据通过哈希算法得到一个固定的结果**，这样子我们查找某个键的话，速度也大大提升，当然了，输入数据发生改变的话，则哈希也会发现改变。

**哈希算法**：根据设定的哈希函数H（key）和处理冲突方法将一组关键字映象到一个有限的地址区间上的算法。也称为 `散列算法、杂凑算法、消息摘要算法`

**任何消息经过散列函数处理后，都会获得唯一的散列值，这一过程称为 “消息摘要”，其散列值称为 “数字指纹”，其算法自然就是 “消息摘要算法” 了**。 换句话说，如果其数字指纹一致，就说明其消息是一致的。

## 消息摘要算法

不存在密钥的管理与分发问题，适合于分布式网络上使用。消息摘要算法主要应用在 “数字签名” 领域，作为对明文的摘要算法。著名的摘要算法有 RSA 公司的 MD5 算法和 SHA-1 算法及其大量的变体。

**特点**：

- 无论输入的消息有多长，计算出来的消息摘要的长度总是固定的。如：MD5
- 消息摘要看起来是 “随机的”： 一般地，只要输入的消息不同，对其进行摘要以后产生的摘要消息也必不相同；但相同的输入必会产生相同的输出
- 消息摘要函数是单向函数，即只能进行正向的信息摘要，而无法从摘要中恢复出任何的消息，甚至根本就找不到任何与原信息相关的信息。
- 好的摘要算法，没有人能从中找到 “碰撞” 或者说极度难找到，虽然 “碰撞” 是肯定存在的（碰撞即不同的内容产生相同的摘要）。

**家谱**：

MD（Message Digest，消息摘要算法）、SHA-1（Secure Hash Algorithm，安全散列算法）和 MAC（Message Authentication Code，消息认证码算法）。

- MD：MD2/MD4/MD5
- SHA：SHA-1/SHA-2
- MAC: HmacMD5、HmacSHA1、HmacSHA256、HmacSHA384 和 HmacSHA512

## MD5

MD5（Message Digest Algorithm 5，消息摘要算法版本5），它由 MD2、MD3、MD4 发展而来，由 Ron Rivest（RSA 公司）在 1992 年提出，目前被广泛应用于数据完整性校验、数据（消息）摘要、数据签名等。MD2、MD4、MD5 都产生 16 字节（128 位）的校验值，一般用 32 位十六进制数表示。MD2 的算法较慢但相对安全，MD4 速度很快，但安全性下降，MD5 比 MD4 更安全、速度更快。

- 稳定、运算速度快。
- 压缩性：输入任意长度的数据，输出长度固定（128 比特位）。
- 运算不可逆：已知运算结果的情况下，无法通过通过逆运算得到原始字符串。
- 高度离散：输入的微小变化，可导致运算结果差异巨大。

```js
MD5("The quick brown fox jumps over the lazy dog")
= '9e107d9d372bb6826bd81d3542a419d6'
```

### 密码加盐

`盐（Salt）`，在密码学中，是指在散列之前将散列内容（例如：密码）的任意固定位置插入特定的字符串。 这个在散列中加入字符串的方式称为 “加盐”。其作用是让加盐后的散列结果和没有加盐的结果不相同，在不同的应用情景中，这个处理可以增加额外的安全性。
在大部分情况，盐是不需要保密的。盐可以是随机产生的字符串，其插入的位置可以也是随意而定。 如果这个散列结果在将来需要进行验证（例如：验证用户输入的密码），则需要将已使用的盐记录下来。为了便于理解，我们来举个简单的示例。

```js
const crypto = require("crypto");

function cryptPwd(password, salt) {
  const saltPassword = password + ":" + salt;
  console.log("原始密码：%s", password);
  console.log("加盐后的密码：%s", saltPassword);

  const md5 = crypto.createHash("md5");
  const result = md5.update(saltPassword).digest("hex");
  console.log("加盐密码的md5值：%s", result);
}

cryptPwd("123456789","exe");
cryptPwd("123456789","eft");

```

结果：

```txt
原始密码：123456789
加盐后的密码：123456789:exe
加盐密码的md5值：3328003d9f786897e0749f349af490ca
原始密码：123456789
加盐后的密码：123456789:eft
加盐密码的md5值：3c45dd21ba03e8216d56dce8fe5ebabf
```
