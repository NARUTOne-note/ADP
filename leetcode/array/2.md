# å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°

> å›°éš¾â­â­â­

**âš¡é¢˜ç›®**ï¼š

â“ ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ã€‚

è¿›é˜¶ï¼šä½ èƒ½è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log (m+n)) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ

è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
è¾“å‡ºï¼š2.50000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5

## æ€è€ƒ âŒš

> ä¸­ä½æ•°

- å‡åºæ’åˆ—
- å¥‡æ•°å–ä¸­é—´
- å¶æ•°å– (a + b)/2

## å°è¯• âŒ›

> å¸¸è§„æ€è·¯

- åˆå¹¶æ•°ç»„æ’åº
- å–ä¸­ä½æ•°

æ—¶é—´å¤æ‚åº¦ï¼šéå†å…¨éƒ¨æ•°ç»„ (m+n)(m+n)
ç©ºé—´å¤æ‚åº¦ï¼šå¼€è¾Ÿäº†ä¸€ä¸ªæ•°ç»„ï¼Œä¿å­˜åˆå¹¶åçš„ä¸¤ä¸ªæ•°ç»„ O(m+n)O(m+n)

```js
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function(nums1, nums2) {
  const arr = [].concat(nums1, nums2).sort((a, b) => a - b);
  const len = arr.length;
  if (len % 2) { // å¥‡
    const index = Math.floor(len / 2);
    return arr[index];
  } else { // å¶
    const index = len / 2;
    return (arr[index] + arr[index - 1]) / 2;
  }
};
```

> ä¸ç”¨åˆå¹¶ï¼ŒåŒæŒ‡é’ˆéå†å¯»æ‰¾ç´¢å¼•

- åŒæŒ‡é’ˆåŒºå¥‡æ•°å¶æ•°æƒ…å†µ

æ—¶é—´å¤æ‚åº¦ï¼šéå†å…¨éƒ¨æ•°ç»„ (m+n)(m+n)
ç©ºé—´å¤æ‚åº¦ï¼šO(1)

```js
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function(nums1, nums2) {
  const n1 = nums1.length;
  const n2 = nums2.length;
  const nt = n1 + n2;
  let index = -1;

  const isO = nt % 2 < 1;
  if (isO) {
    index = nt / 2;
  } else {
    index = Math.floor(nt / 2);
  }
  
  if (n1 === 0) {
    if (isO) {
      return (nums2[index] + nums2[index - 1]) / 2
    } else {
      return nums2[index]
    }
  }

  if (n2 === 0) {
    if (isO) {
      return (nums1[index] + nums1[index - 1]) / 2
    } else {
      return nums1[index]
    }
  }

  let pointA = 0;
  let pointB = 0;
  let left = -1;
  let right = -1;
  let i = 0;

  while(i <= index) {
    const a = nums1[pointA];
    const b = nums2[pointB];
    left = right;

    // aæŒ‡é’ˆè¿˜èƒ½åç§» ä¸” ï¼ˆbæŒ‡é’ˆä¸èƒ½åç§» æˆ– a < bï¼‰
    if (pointA < n1 && (pointB >= n2 || a < b)) {
      right = nums1[pointA]; // å…ˆèµ‹å€¼
      pointA += 1;
    } else {
      right = nums2[pointB];
      pointB += 1;
    }
    i++;
  }

  if (isO) {
    return (left + right) / 2
  }

  return right

};
```

## ä¼˜è§£ ğŸš€

> äºŒåˆ†æ³•åˆ‡å‰²

- Kä¸ºä¸­ä½æ•°ç´¢å¼•
- æ¯æ¬¡k/2è¿›è¡Œæ¯”è¾ƒæœ€å°ï¼Œæœ€å°å‰éƒ½åˆ‡å‰²
- é‡å¤ä¸Šé¢ï¼Œè‡³k = 1
- æ‰¾æœ€å°å€¼

```js
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function(nums1, nums2) {
  let m = nums1.length
  let n = nums2.length

  // å¥‡æ•°ï¼Œå¶æ•°
  let k1 = Math.floor((m + n + 1) / 2)
  let k2 = Math.floor((m + n + 2) / 2)

  // ï¼ˆå¥‡ + å¶ï¼‰/ 2 ï¼š ä¸­ä½æ•°æ˜¯ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„ç¬¬ (m+n)/2 ä¸ªå…ƒç´ å’Œç¬¬ (m+n)/2+1 ä¸ªå…ƒç´ çš„å¹³å‡å€¼
  return (findMedianSortedArraysCore(nums1, 0, nums2, 0, k1) + findMedianSortedArraysCore(nums1, 0, nums2, 0, k2)) / 2
};

/**
 * åŒæŒ‡é’ˆ
 * ä¸¤æ•°ç»„æ¯”è¾ƒç¡®å®š
 * @param {number[]} nums1 â€”â€”>
 * @param {number[]} nums2 <â€”â€”
 * @param {number} i
 * @param {number} j
 * @param {number} kï¼Œæ­¥è¿›
 * @return {number}
 */
const findMedianSortedArraysCore = (nums1, i, nums2, j, k)  => {
  // å¦‚æœæ•°ç»„èµ·å§‹ä½ç½®å·²ç»å¤§äºæ•°ç»„é•¿åº¦-1
  // è¯´æ˜å·²ç»æ˜¯ä¸ªç©ºæ•°ç»„
  // ç›´æ¥ä»å¦å¤–ä¸€ä¸ªæ•°ç»„é‡Œå–ç¬¬kä¸ªæ•°å³å¯
  if (i > nums1.length - 1) {
    return nums2[j + k - 1]
  }
  if (j > nums2.length - 1) {
    return nums1[i + k - 1]
  }
  // å¦‚æœkä¸º1, å½“å‰å¾ªç¯æ¯”è¾ƒç»“æŸï¼ŒæŸé¡¹æ•°ç»„è¾¾åˆ°æœ€åä¸€é¡¹æˆ–ç¬¬ä¸€é¡¹
  // å°±æ˜¯å–ä¸¤ä¸ªæ•°ç»„çš„èµ·å§‹å€¼é‡Œçš„æœ€å°å€¼
  if (k === 1) {
    return Math.min(nums1[i], nums2[j])
  }

  // k/2 æ’é™¤
  // å–k2ä¸º(k/2)æˆ–è€…æ•°ç»„1çš„é•¿åº¦æˆ–è€…æ•°ç»„2çš„é•¿åº¦çš„æœ€å°å€¼
  // è¿™ä¸€æ­¥å¯ä»¥é¿å…k2å¤§äºæŸä¸ªæ•°ç»„çš„é•¿åº¦ï¼ˆé•¿åº¦ä¸ºä»èµ·å§‹åæ ‡åˆ°ç»“å°¾ï¼‰
  let k2 = Math.floor(k / 2) // å¯¹åŠæ­¥è¿›
  let length1 = nums1.length - i
  let length2 = nums2.length - j
  k2 = Math.min(k2, length1, length2)

  let value1 = nums1[i + k2 - 1]
  let value2 = nums2[j + k2 - 1]

  // æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„èµ·å§‹åæ ‡çš„å€¼
  // å¦‚æœvalue1å°äºvalue2
  // å°±èˆå¼ƒnums1å‰i + k2éƒ¨åˆ†
  // å¦åˆ™èˆå¼ƒnums2å‰j + k2éƒ¨åˆ†
  if (value1 < value2) {
    return findMedianSortedArraysCore(nums1, i + k2, nums2, j, k - k2)
  } else {
    return findMedianSortedArraysCore(nums1, i, nums2, j + k2, k - k2)
  }
}
```
